<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />

    <title>SKKU-table</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css"
    />

    <style>
      .container {
        width: 1200px;
      }
    </style>
  </head>

  <body>
    <nav class="navbar navbar-light bg-light">
      <div class="container">
        <span class="navbar-brand mb-0 h1"
          ><i class="bi bi-alarm"></i> SKKU-timeTable <i class="bi bi-table"></i
        ></span>
      </div>
    </nav>

    <div class="container">
      <button
        type="button"
        class="btn btn-primary m-3 text-nowrap"
        onclick="location.href='index.html'"
      >
        <i class="bi bi-arrow-left-circle"></i> 뒤로 가기
      </button>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-md-9 bg-light mb-3 rounded-3">
          <!-- 여기에 시간표 리스트 나열 -->
          <div id="Tables">
            <table
              class="table table-primary mt-4"
              style="table-layout: fixed; width: 850px; margin: auto"
            >
              <thead>
                <tr>
                  <th scope="col"></th>
                  <th scope="col">월</th>
                  <th scope="col">화</th>
                  <th scope="col">수</th>
                  <th scope="col">목</th>
                  <th scope="col">금</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th scope="row">9:00</th>
                  <td>Mark</td>
                  <td>Otto</td>
                  <td>@mdo</td>
                  <td>Otto</td>
                  <td>@mdo</td>
                </tr>
                <tr>
                  <th scope="row">10:30</th>
                  <td>Jacob</td>
                  <td>Thornton</td>
                  <td>@fat</td>
                  <td>Thornton</td>
                  <td>@fat</td>
                </tr>
                <tr>
                  <th scope="row">12:00</th>
                  <td>Larry the Bird</td>
                  <td>@twitter</td>
                  <td>Larry the Bird</td>
                  <td>@twitter</td>
                  <td>@twitter</td>
                </tr>
                <tr>
                  <th scope="row">1:30</th>
                  <td>Larry the Bird</td>
                  <td>@twitter</td>
                  <td>Larry the Bird</td>
                  <td>@twitter</td>
                  <td>@twitter</td>
                </tr>
                <tr>
                  <th scope="row">3:00</th>
                  <td>Larry the Bird</td>
                  <td>@twitter</td>
                  <td>Larry the Bird</td>
                  <td>@twitter</td>
                  <td>@twitter</td>
                </tr>
                <tr>
                  <th scope="row">4:30</th>
                  <td>Larry the Bird</td>
                  <td>@twitter</td>
                  <td>Larry the Bird</td>
                  <td>@twitter</td>
                  <td>@twitter</td>
                </tr>
                <tr>
                  <th scope="row">6:00</th>
                  <td>Larry the Bird</td>
                  <td>@twitter</td>
                  <td>Larry the Bird</td>
                  <td>@twitter</td>
                  <td>@twitter</td>
                </tr>
              </tbody>
            </table>

            <table
              class="table table-primary mt-4"
              style="table-layout: fixed; width: 850px; margin: auto"
            >
              <thead>
                <tr>
                  <th scope="col"></th>
                  <th scope="col">월</th>
                  <th scope="col">화</th>
                  <th scope="col">수</th>
                  <th scope="col">목</th>
                  <th scope="col">금</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th scope="row">9:00</th>
                  <td>Mark</td>
                  <td>Otto</td>
                  <td>@mdo</td>
                  <td>Otto</td>
                  <td>@mdo</td>
                </tr>
                <tr>
                  <th scope="row">10:30</th>
                  <td>Jacob</td>
                  <td>Thornton</td>
                  <td>@fat</td>
                  <td>Thornton</td>
                  <td>@fat</td>
                </tr>
                <tr>
                  <th scope="row">12:00</th>
                  <td>Larry the Bird</td>
                  <td>@twitter</td>
                  <td>Larry the Bird</td>
                  <td>@twitter</td>
                  <td>@twitter</td>
                </tr>
                <tr>
                  <th scope="row">1:30</th>
                  <td>Larry the Bird</td>
                  <td>@twitter</td>
                  <td>Larry the Bird</td>
                  <td>@twitter</td>
                  <td>@twitter</td>
                </tr>
                <tr>
                  <th scope="row">3:00</th>
                  <td>Larry the Bird</td>
                  <td>@twitter</td>
                  <td>Larry the Bird</td>
                  <td>@twitter</td>
                  <td>@twitter</td>
                </tr>
                <tr>
                  <th scope="row">4:30</th>
                  <td>Larry the Bird</td>
                  <td>@twitter</td>
                  <td>Larry the Bird</td>
                  <td>@twitter</td>
                  <td>@twitter</td>
                </tr>
                <tr>
                  <th scope="row">6:00</th>
                  <td>Larry the Bird</td>
                  <td>@twitter</td>
                  <td>Larry the Bird</td>
                  <td>@twitter</td>
                  <td>@twitter</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="col-md-3 rounded-3 p-2 mb-3" style="background: lightgray">
          <!-- 사이드 바 메뉴-->

          <!-- 패널 타이틀1 -->
          <div class="panel panel-default mt-2">
            <div class="panel-heading">
              <h4 class="panel-title">필터</h4>
            </div>

            <select class="form-select" aria-label="Default select example">
              <option selected>적용할 필터를 선택하세요</option>
              <option value="1">공강 요일 수</option>
              <option value="2">과목간 공강 시간</option>
              <option value="3">하루 최대 과목 수</option>
              <option value="4">최소 평점</option>
              <option value="5">수강할 학점</option>
            </select>

            <!-- 선택된 필터들에 대해 Placeholder를 
              "공강 요일 수", "과목간 공강 시간", ... 를 입력

            또는
            
            선택한 필터에 대한 description을 불러오기
          
            -->

            <!-- 패널 타이틀2 -->
            <div class="panel panel-default mt-3 mb-3">
              <input
                type="text"
                class="form-control me-2"
                placeholder="필터 값"
              />
            </div>

            <button
              type="button"
              class="btn btn-primary mt-2 text-nowrap"
              onclick=""
            >
              필터 적용
            </button>
          </div>
        </div>
      </div>
    </div>

    <!--
    <div class="container show-grid">
      <div class="row mt-3">
        <div class="col-md-6 bg-light">
          <div class="container">그룹 1</div>
          <div class="container">그룹 2</div>
          <div class="container">그룹 3</div>
        </div>
        <div class="col-md-6 bg-light">
          <div class="container">그룹 4</div>
          <div class="container">그룹 5</div>
          <div class="container">그룹 6</div>
        </div>
      </div>
    </div>
    -->

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
      crossorigin="anonymous"
    ></script>

    <script>
      //그룹 받아옴
      let groups = localStorage.getItem("groups");

      //값 받아온 리스트
      //let groups = [[1, 4, 5, 5, 1], ['a', 'b', 'c'], [520, 130, 245, 241]]; //-> index.html에서 여기에 넣어주면 됨
      let products = [];
      let cellSearch = [];

      //조합 추출해서 products에 하나씩 리스트 element로 들어감
      products = groups.reduce(
        function tl(accumulator, value) {
          let listCtrl = [];
          accumulator.forEach(function (a0) {
            value.forEach(function (a1) {
              listCtrl.push(a0.concat(a1));
            });
          });
          return listCtrl;
        },
        [[]]
      );

      //console.log(products[0]);

      const rowCnt = 8;
      const columnCnt = 6;

      for (let sel in products) {
        //해당 선택지가 조건에 맞는지 확인 - 아무리 커도 24학점 미만 ?

        //조건에 만족했다면
        //div값 create
        let tablesVar = document.getElementById("Tables");
        let div = document.createElement("div");

        div.innerHTML +=
          '<table class="table table-primary mt-4" style="table-layout: fixed; width: 850px; margin: auto">';
        div.innerHTML += `
              <thead>
              <tr>
                <th scope="col"></th>
                <th scope="col">월</th>
                <th scope="col">화</th>
                <th scope="col">수</th>
                <th scope="col">목</th>
                <th scope="col">금</th>
              </tr>
              </thead>`;

        div.innerHTML += "<tbody>";
        for (let i = 1; i < rowCnt; i++) {
          div.innerHTML += "<tr>";
          switch (i) {
            case 1:
              div.innerHTML += '<th scope="row">9:00</th>';
              break;
            case 2:
              div.innerHTML += '<th scope="row">10:30</th>';
              break;
            case 3:
              div.innerHTML += '<th scope="row">12:00</th>';
              break;
            case 4:
              div.innerHTML += '<th scope="row">13:30</th>';
              break;
            case 5:
              div.innerHTML += '<th scope="row">15:00</th>';
              break;
            case 6:
              div.innerHTML += '<th scope="row">16:30</th>';
              break;
            case 7:
              div.innerHTML += '<th scope="row">18:00</th>';
              break;
          }
          for (let j = 1; j < columnCnt; j++) {
            div.innerHTML += "<td>";

            cellSearch = sel.filter([, [j /*요일*/, i /*교시*/]]); //데이터 입력에 따라 수정

            if (cellSearch.length > 1) {
              //시간이 겹침
              alert("Table Error - Please Check Again");
            } else if (cellSearch.length === 1) {
              div.innerHTML += `${cellSearch.class_name_Kor}`;
            } else {
              div.innerHTML += "-";
            }

            div.innerHTML += "</td>";
          }
          div.innerHTML += "</tr>";
        }
        div.innerHTML += "</tbody>";
        div.innerHTML += "</table>";

        tablesVar.appendChild(div);
      } //\for
    </script>
  </body>
</html>
